# This file contains the fastlane.tools configuration
# You can find the documentation at https://docs.fastlane.tools
#
# For a list of all available actions, check out
#
#     https://docs.fastlane.tools/actions
#
# For a list of all available plugins, check out
#
#     https://docs.fastlane.tools/plugins/available-plugins
#

# Uncomment the line if you want fastlane to automatically update itself
# update_fastlane

default_platform(:ios)

platform :ios do

  desc "Build with XCode tools"
  lane :build_xcode do
    UI.message("Start building")
      xcodebuild(
        archive: nil,
        scheme: "FastSocket"
      )
    UI.success("Finished building")
  end

  desc "Run unit tests"
  lane :test_xcode do
    UI.message("Performing unit tests")
      # use scan file
      scan
    UI.success("Finished unit tests")
  end

  desc "Build with Carthage"
  lane :build_carthage do
    # build with carthage
    carthage(
      command: "build",
      no_skip_current: true,
      verbose: false,
      platform: "all",
      log_path: "carthage.log"
    )
  end

  desc "Create archive with carthage"
  lane :archive_carthage do
    # archive with carthage
    carthage(
      output: "FastSocket.framework.zip",
      command: "archive",
      verbose: false,
    )
  end

  desc "Update and commit the podspec"
  lane :update_podspec do
    # get version from branch
    # update podspec, commit and push
  end

end
